# =============================================================================
# WellKorea ERP - Production Environment
# =============================================================================
# Usage:
#   1. Copy this file to .env: cp .env.prod.example .env
#   2. Fill in ALL required values (no defaults in production)
#   3. Configure host Nginx (see docs/deployment.md)
#   4. Run: docker compose -f docker-compose.prod.yml up -d
#
# SECURITY:
#   - Never commit .env to version control
#   - Use strong, unique passwords for all services
#   - Consider using a secrets manager for sensitive values
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (REQUIRED)
# -----------------------------------------------------------------------------
POSTGRES_DB=wellkorea_erp
POSTGRES_USER=wellkorea_prod
POSTGRES_PASSWORD=<STRONG_PASSWORD_HERE>

# -----------------------------------------------------------------------------
# MinIO S3 Storage Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# External URL for presigned URLs (must match Nginx subdomain)
MINIO_URL=https://storage.wellkorea.mipllab.com
MINIO_ACCESS_KEY=<MINIO_ACCESS_KEY_HERE>
MINIO_SECRET_KEY=<MINIO_SECRET_KEY_HERE>
MINIO_BUCKET_NAME=wellkorea-erp-documents

# -----------------------------------------------------------------------------
# JWT Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 32
JWT_SECRET=<STRONG_JWT_SECRET_HERE>
JWT_EXPIRATION=86400000

# -----------------------------------------------------------------------------
# Email Configuration (REQUIRED for notifications)
# -----------------------------------------------------------------------------
# Mail provider: smtp (default) or graph (Microsoft Graph API)
MAIL_PROVIDER=smtp

# SMTP Configuration (required if MAIL_PROVIDER=smtp)
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=<EMAIL_USERNAME_HERE>
MAIL_PASSWORD=<EMAIL_APP_PASSWORD_HERE>

# Microsoft Graph Configuration (required if MAIL_PROVIDER=graph)
# For Outlook/Microsoft 365 email via OAuth2 (personal accounts like hotmail.com)
# Configure refresh token via Admin Settings > Mail > Connect (in-app OAuth2 flow)
# MICROSOFT_GRAPH_CLIENT_ID=<AZURE_AD_APP_CLIENT_ID>
# MICROSOFT_GRAPH_CLIENT_SECRET=<AZURE_AD_APP_CLIENT_SECRET>

# App URLs (for OAuth2 redirect - REQUIRED if using in-app OAuth2)
# APP_BASE_URL must match the redirect URI configured in Azure AD
APP_BASE_URL=https://api.wellkorea.mipllab.com
APP_FRONTEND_URL=https://wellkorea.mipllab.com

# -----------------------------------------------------------------------------
# Security Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# Only allow requests from the production frontend domain
SECURITY_CORS_ALLOWED_ORIGINS=https://wellkorea.mipllab.com

# -----------------------------------------------------------------------------
# Docker Image Configuration (optional)
# -----------------------------------------------------------------------------
# Use pre-built images from registry, or omit to build locally
# BACKEND_IMAGE=ghcr.io/wellkorea/erp-backend:latest
